<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú de API</title>
</head>
<body>

<h2>Gestión de API GymYa</h2>

<div>
    <h3>Selecciona el recurso:</h3>
    <div>
        <div onclick="selectResource('gimnasios')">
            <h4 class="text-center">Gimnasios</h4>
        </div>
        <div onclick="selectResource('entrenadores')">
            <h4 class="text-center">Entrenadores</h4>
        </div>
        <div onclick="selectResource('clientes')">
            <h4>Clientes</h4>
        </div>
    </div>
</div>

<div class=>
    <h3>Selecciona la operación:</h3>
    <div>
        <div onclick="selectOperation('GET')">
            <h4 class="text-center">GET</h4>
        </div>
        <div onclick="selectOperation('POST')">
            <h4 class="text-center">POST</h4>
        </div>
        <div onclick="selectOperation('PATCH')">
            <h4 class="text-center">PATCH</h4>
        </div>
        <div onclick="selectOperation('DELETE')">
            <h4 class="text-center">DELETE</h4>
        </div>
    </div>
</div>

<button id="executeBtn">Ejecutar</button>

<button id="logoutBtn">
    Cerrar Sesión
</button>


<script>
    let selectedResource = '';
    let selectedOperation = '';

    function selectResource(resource) {
        selectedResource = resource;
        document.querySelectorAll('[onclick^="selectResource"]').forEach(element => {
            element.classList.remove('bg-gray-200'); // Restablece el color de fondo
        });
        event.currentTarget.classList.add('bg-gray-200'); // Marca el recurso seleccionado
    }

    function selectOperation(operation) {
        selectedOperation = operation;
        document.querySelectorAll('[onclick^="selectOperation"]').forEach(element => {
            element.classList.remove('bg-gray-200'); // Restablece el color de fondo
        });
        event.currentTarget.classList.add('bg-gray-200'); // Marca la operación seleccionada
    }

    document.getElementById('executeBtn').addEventListener('click', function() {
        if (!selectedResource || !selectedOperation) {
            alert('Por favor, selecciona un recurso y una operación.');
            return;
        }

        const token = localStorage.getItem('token'); // Recuperar el token

        if (!token) {
            alert('Debes iniciar sesión para acceder a esta funcionalidad.');
            window.location.href = 'login.html'; // Redirigir a la página de login si no hay token
            return;
        }

        // Redirigir a la página HTML correspondiente según el recurso y la operación
        const page = `${selectedResource}-${selectedOperation.toLowerCase()}.html`;
        window.location.href = page;
    });

    document.getElementById('logoutBtn').addEventListener('click', function() {
            // Eliminar el token de localStorage
            localStorage.removeItem('token');
            // Redirigir a la página de login
            window.location.href = 'index.html'; // Cambia a la URL que deseas
        });
    </script>
</script>

</body>
</html>
