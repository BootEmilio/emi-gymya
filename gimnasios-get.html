<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gimnasios - GET</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-4xl">
        <h2 class="text-2xl font-semibold text-center mb-4">Gimnasios afiliados a GymYa</h2>
        <button id="getBtn" class="w-full bg-blue-500 text-white font-bold py-2 rounded hover:bg-blue-600 transition duration-200 mb-4">
            Obtener Gimnasios
        </button>
        <div id="response" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    </div>

    <script>
        document.getElementById('getBtn').addEventListener('click', async function() {
            const token = localStorage.getItem('token');
            const responseDiv = document.getElementById('response');
            responseDiv.innerHTML = ''; // Limpiar la respuesta anterior
            
            try {
                const res = await fetch('https://api-gymya-api.onrender.com/api/gimnasios', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    }
                });
                const data = await res.json();

                // Mostrar gimnasios en tarjetas
                if (data.length > 0) {
                    data.forEach(gym => {
                        const gymCard = document.createElement('div');
                        gymCard.className = 'bg-white rounded-lg shadow p-4';
                        gymCard.innerHTML = `
                            <h3 class="font-bold text-lg">${gym.Nombre}</h3>
                            <p class="text-gray-600"><strong>Código:</strong> ${gym.codigo_gym}</p>
                            <p class="text-gray-600"><strong>País:</strong> ${gym.Pais}</p>
                            <p class="text-gray-600"><strong>Estado:</strong> ${gym.Estado}</p>
                            <p class="text-gray-600"><strong>Ciudad:</strong> ${gym.Ciudad}</p>
                            <p class="text-gray-600"><strong>Dirección:</strong> ${gym.Direccion}</p>
                            <p class="text-gray-600"><strong>Código Postal:</strong> ${gym.CodigoPostal}</p>
                            <p class="text-gray-600"><strong>RFC:</strong> ${gym.RFC}</p>
                        `;
                        responseDiv.appendChild(gymCard);
                    });
                } else {
                    responseDiv.innerHTML = `<p class="text-gray-600">No se encontraron gimnasios.</p>`;
                }
            } catch (error) {
                responseDiv.innerHTML = `<pre class="text-red-500">Error: ${error.message}</pre>`;
            }
        });
    </script>
</body>
</html>
